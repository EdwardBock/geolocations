{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/script/tinymce-plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","tinymce","PluginManager","add","editor","url","TEXT","window","geolocations","text","TAXONOMIES","taxonomies","editItem","node","nodeName","dom","hasClass","decodeURIComponent","getAttrib","openEditor","single","taxonomy","terms","address","address_id","getAttribute","attributes","length","indexOf","replace","address_node","address_id_node","on_autocomplete_select","event","ui","item","ID","this","val","post_title","win","windowManager","open","title","html","single_text","map","tax","join","terms_tooltip","address_label","address_tooltip","height","width","buttons","subtype","onclick","$single","$address","$taxonomy","$terms","_single","is","_tax","_address","insertContent","close","setTimeout","trigger","autocomplete","source","ajaxurl","minLength","select","appendTo","_renderItem","ul","append","on","$this","attr","hide","show","target","unselect","removeClass","button","addClass","hasPostqueueClass","className","test","toggleContentEditableState","state","nodes","parser","addNodeFilter","serializer","content","match","attrs","found","data","regex","exec","index","lastIndex","_attr","push","encodeURIComponent","addCommand","selection","getNode","addButton","icon","jQuery"],"mappings":"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","file":"tinymce_plugin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","(function( $ ) {\n\t'use strict';\n\n\tif (typeof tinymce !== typeof undefined){\n\n\t\t/**\n\t\t * Add plugin to tinymce editor\n\t\t */\n\t\ttinymce.PluginManager.add('geolocations', function( editor, url ) {\n\n\t\t\tconst TEXT = window.geolocations.text;\n\t\t\tconst TAXONOMIES = window.geolocations.taxonomies;\n\n\t\t\t$(\"body\").on(\"change\", \".geolocations-dialog input\",function(){\n\t\t\t\tconst $this = $(this);\n\t\t\t\tif($this.attr(\"name\") === \"single\"){\n\t\t\t\t\tif($this.is(\":checked\")){\n\t\t\t\t\t\t$(\"[data-geolocations-single='0']\").hide();\n\t\t\t\t\t\t$(\"[data-geolocations-single='1']\").show();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(\"[data-geolocations-single='1']\").hide();\n\t\t\t\t\t\t$(\"[data-geolocations-single='0']\").show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * start edit postqueue if node is postqueue node\n\t\t\t * @param node\n\t\t\t */\n\t\t\tfunction editItem( node ) {\n\t\t\t\tvar data;\n\n\t\t\t\tif ( node.nodeName !== 'DIV' || !editor.dom.hasClass( node, 'geolocations' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdata = window.decodeURIComponent( editor.dom.getAttrib( node, 'data-geolocations' ) );\n\n\t\t\t\t// Make sure we've selected a postqueue node.\n\t\t\t\tif ( editor.dom.hasClass( node, 'geolocations' ) ) {\n\t\t\t\t\topenEditor(node);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * open editor for postqueue\n\t\t\t * @param node\n\t\t\t */\n\t\t\tfunction openEditor(node){\n\n\t\t\t\tlet single, taxonomy, terms, address, address_id;\n\n\t\t\t\t/**\n\t\t\t\t * collect data\n\t\t\t\t */\n\t\t\t\tif(typeof node !== typeof undefined){\n\t\t\t\t\tsingle = node.getAttribute(\"data-single\");\n\n\t\t\t\t\tif(typeof single === typeof undefined || !single){\n\t\t\t\t\t\tsingle = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsingle = true;\n\t\t\t\t\t}\n\n\t\t\t\t\ttaxonomy = \"\";\n\t\t\t\t\tterms = \"\";\n\t\t\t\t\tfor(let i = 0; i < node.attributes.length; i++){\n\t\t\t\t\t\tlet att = node.attributes[i];\n\t\t\t\t\t\tlet name = att.nodeName;\n\t\t\t\t\t\tif(name.indexOf(\"data-tax_\") === 0){\n\t\t\t\t\t\t\tterms = node.getAttribute(name);\n\t\t\t\t\t\t\ttaxonomy = name.replace(\"data-tax_\",\"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst address_node = node.getAttribute(\"data-address\");\n\t\t\t\t\tconst address_id_node = node.getAttribute(\"data-id\");\n\n\t\t\t\t\taddress = (typeof address_node === typeof \"\")? address_node: \"\";\n\t\t\t\t\taddress_id = (typeof address_id_node === typeof \"\")? address_id_node : \"\";\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * autocomplete select event\n\t\t\t\t * @param event\n\t\t\t\t * @param ui\n\t\t\t\t * @return {boolean}\n\t\t\t\t */\n\t\t\t\tfunction on_autocomplete_select(event, ui){\n\t\t\t\t\tconst {item} = ui;\n\t\t\t\t\taddress_id = item.ID;\n\t\t\t\t\t$(this).val(item.post_title);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * open the editor overlay\n\t\t\t\t */\n\t\t\t\tvar win = editor.windowManager.open({\n\t\t\t\t\ttitle: \"Geolocations\",\n\t\t\t\t\thtml:  `\n<div class=\"geolocations-dialog\" >\n\t\n\t<div class=\"geolocations-dialog__field\">\n\t\t<label><input id=\"geolocations-single\" type=\"checkbox\" name=\"single\" ${(single)?\"checked\":\"\"} /> ${TEXT.single_text}</label>\n\t</div>\n\t\n\t<div data-geolocations-single=\"0\">\n\t\t<div class=\"geolocations-dialog__field\">\n\t\t\t<label><span class=\"geolocations-dialog__label--text\">${TEXT.taxonomy}</span><br>\n\t\t\t\t<select id=\"geolocations-taxonomy\" class=\"geolocations-dialog__select\">\n\t\t\t\t\t${TAXONOMIES.map((tax)=>{\n\t\t\t\t\t\treturn `<option value=\"${tax.value}\" ${(tax.value === taxonomy)?\"selected\":\"\"}>${tax.text}</option>`;\n\t\t\t\t\t\t\t}).join(\"\")}\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t</div>\n\t\t<div class=\"geolocations-dialog__field\">\n\t\t\t<label>\n\t\t\t\t<span class=\"geolocations-dialog__label--text\">${TEXT.terms}</span><br>\n\t\t\t\t<small>${TEXT.terms_tooltip}</small><br>\n\t\t\t\t<input id=\"geolocations-terms\" type=\"text\" value=\"${terms}\" />\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\t\n\t<div data-geolocations-single=\"1\">\n\t\t<div class=\"geolocations-dialog__field\">\n\t\t\t<label>\n\t\t\t\t<span class=\"geolocations-dialog__label--text\">${TEXT.address_label}</span><br>\n\t\t\t\t<span class=\"geolocations-dialog__description\">${TEXT.address_tooltip}</span><br>\n\t\t\t\t<input id=\"geolocations-address\" type=\"text\" value=\"${address}\" /><br>\n\t\t\t\t<div id=\"geolocations-address__list\"></div>\n\t\t\t</label>\n\t\t</div>\n\t</div>\n\t\n</div>\n`,\n\t\t\t\t\theight: 320,\n\t\t\t\t\twidth: 340,\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Ok',\n\t\t\t\t\t\t\tsubtype: 'primary',\n\t\t\t\t\t\t\tonclick: function() {\n\n\t\t\t\t\t\t\t\tconst $single = $(\"#geolocations-single\");\n\t\t\t\t\t\t\t\tconst $address = $(\"#geolocations-address\");\n\t\t\t\t\t\t\t\tconst $taxonomy = $(\"#geolocations-taxonomy\");\n\t\t\t\t\t\t\t\tconst $terms = $(\"#geolocations-terms\");\n\n\t\t\t\t\t\t\t\tlet _single = \"\";\n\t\t\t\t\t\t\t\tif($single.is(\":checked\")){\n\t\t\t\t\t\t\t\t\t_single = \"single=\\\"true\\\"\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlet _tax = \"\";\n\t\t\t\t\t\t\t\tlet _address = \"\";\n\t\t\t\t\t\t\t\tif(_single === ''){\n\t\t\t\t\t\t\t\t\tif($taxonomy.length && $taxonomy.val() !== '' && $terms.length && $terms.val() !== ''){\n\t\t\t\t\t\t\t\t\t\t_tax = `tax_${$taxonomy.val()}=\"${$terms.val().replace(\" \",\"\")}\"`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if( address_id !== '' && $address.val() !== ''){\n\t\t\t\t\t\t\t\t\t_address=`address=\"${$address.val()}\" id=\"${address_id}\"`\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\teditor.insertContent(`[geolocations_map ${_single} ${_address} ${_tax}]`);\n\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Close',\n\t\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t$(\"#geolocations-single\").trigger(\"change\");\n\t\t\t\t\t$(\"#geolocations-address\")\n\t\t\t\t\t\t.autocomplete({\n\t\t\t\t\t\t\tsource: ajaxurl+\"?action=geolocations_admin\",\n\t\t\t\t\t\t\tminLength: 3,\n\t\t\t\t\t\t\tselect: on_autocomplete_select,\n\t\t\t\t\t\t\tappendTo: \"#geolocations-address__list\",\n\t\t\t\t\t\t}).autocomplete( \"instance\" )._renderItem = function( ul, item ) {\n\t\t\t\t\t\t\treturn $( \"<li class='geolocations-dialog__address-item'>\" )\n\t\t\t\t\t\t\t.append(\n\t\t\t\t\t\t\t\t`<span class=\"geolocations-dialog__address-item--title\">${item.post_title}</span>\n<span class='geolocations-dialog__address-item--id' >ID: ${item.ID}</span>\n<span class=\"geolocations-dialog__address-item--info\">${item.address}</span>`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.appendTo( ul );\n\t\t\t\t\t\t}\n\t\t\t\t},300);\n\n\n\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * check mouseup in editor\n\t\t\t */\n\t\t\teditor.on( 'mouseup', function( event ) {\n\t\t\t\tvar dom = editor.dom,\n\t\t\t\t\tnode = event.target;\n\n\t\t\t\tfunction unselect() {\n\t\t\t\t\tdom.removeClass( dom.select( 'div.geolocations' ), 'geolocations-selected' );\n\t\t\t\t}\n\n\t\t\t\tif ( node.nodeName === 'DIV' && dom.getAttrib( node, 'data-geolocations' ) ) {\n\t\t\t\t\t// Don't trigger on right-click\n\t\t\t\t\tif ( event.button !== 2 ) {\n\t\t\t\t\t\tif ( dom.hasClass( node, 'geolocations-selected' ) ) {\n\t\t\t\t\t\t\teditItem( node );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tunselect();\n\t\t\t\t\t\t\tdom.addClass( node, 'geolocations-selected' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunselect();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Display gallery, audio or video instead of img in the element path\n\t\t\teditor.on( 'ResolveName', function( event ) {\n\t\t\t\tvar dom = editor.dom,\n\t\t\t\t\tnode = event.target;\n\t\t\t\tif ( node.nodeName === 'DIV' && dom.getAttrib( node, 'data-geolocations' ) ) {\n\t\t\t\t\tif ( dom.hasClass( node, 'geolocations' ) ) {\n\t\t\t\t\t\tevent.name = 'geolocations';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * init the postqueue tinymce items\n\t\t\t */\n\t\t\teditor.on('preInit', function() {\n\t\t\t\tfunction hasPostqueueClass(node) {\n\t\t\t\t\tvar className = node.attr('class');\n\t\t\t\t\treturn className && /\\bgeolocations\\b/.test(className);\n\t\t\t\t}\n\n\t\t\t\tfunction toggleContentEditableState(state) {\n\t\t\t\t\treturn function(nodes) {\n\t\t\t\t\t\tvar i = nodes.length, node;\n\n\t\t\t\t\t\tfunction toggleContentEditable(node) {\n\t\t\t\t\t\t\tnode.attr('contenteditable', state ? 'true' : null);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\tnode = nodes[i];\n\n\t\t\t\t\t\t\tif (hasPostqueueClass(node)) {\n\t\t\t\t\t\t\t\tnode.attr('contenteditable', state ? 'false' : null);\n\t\t\t\t\t\t\t\t// tinymce.each(node.getAll('figcaption'), toggleContentEditable);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\teditor.parser.addNodeFilter('div', toggleContentEditableState(true));\n\t\t\t\teditor.serializer.addNodeFilter('div', toggleContentEditableState(false));\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * replace shortcode by html representation for tinymce\n\t\t\t */\n\t\t\teditor.on( 'BeforeSetContent', function( event ) {\n\t\t\t\tevent.content = event.content.replace( /\\[geolocations_map([^\\]]*)\\]/g, function( match, attrs ) {\n\n\t\t\t\t\tlet found = [];\n\t\t\t\t\tlet data = [];\n\n\t\t\t\t\tconst regex = /(tax_)?([\\w\\-_]+)=\"([^\"]+)\"/g;\n\n\t\t\t\t\tlet m;\n\t\t\t\t\twhile ((m = regex.exec(attrs)) !== null) {\n\t\t\t\t\t\t// This is necessary to avoid infinite loops with zero-width matches\n\t\t\t\t\t\tif (m.index === regex.lastIndex) {\n\t\t\t\t\t\t\tregex.lastIndex++;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet _attr = m[2];\n\n\t\t\t\t\t\tif(m[1]){\n\t\t\t\t\t\t\tfor(let i = 0; i < TAXONOMIES.length; i++){\n\t\t\t\t\t\t\t\tlet t = TAXONOMIES[i];\n\t\t\t\t\t\t\t\tif(_attr === t.value){\n\t\t\t\t\t\t\t\t\t_attr = t.text;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfound.push(`<b>${_attr}:</b> ${m[3]}`);\n\t\t\t\t\t\tdata.push(`data-${m[2]}=\"${m[3]}\"`);\n\t\t\t\t\t}\n\n\n\t\t\t\t\treturn '<div data-geolocations=\"'+window.encodeURIComponent( match )+'\" ' +\n\t\t\t\t\t\tdata.join(\" \")+' class=\"geolocations\">'+\n\t\t\t\t\t\t'<span class=\"geolocations__title\">Geolocations</span><br/>'+\n\t\t\t\t\t\tfound.join(\" <br/> \")+\n\t\t\t\t\t\t'<!--geolocations--></div>';\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * restore shortcode from html\n\t\t\t */\n\t\t\teditor.on( 'PostProcess', function( event ) {\n\t\t\t\tif ( event.get ) {\n\t\t\t\t\tevent.content = event.content.replace(/<div[^>]+?data-geolocations=\"([^\"]*?)\".+?<!--geolocations--><\\/div>/gi, function(match, data){\n\t\t\t\t\t\treturn \"<p>\"+window.decodeURIComponent(data)+\"</p>\";\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('...');\n\t\t\t */\n\t\t\teditor.addCommand( 'Geolocations', function() {\n\t\t\t\teditItem( editor.selection.getNode() );\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * add button to editor\n\t\t\t */\n\t\t\teditor.addButton('geolocations', {\n\t\t\t\t// text: 'Termine',\n\t\t\t\ttitle: \"Geolocations\",\n\t\t\t\t// image: url+'/../images/icon.png',\n\t\t\t\ticon: 'icon dashicons-before dashicons-location-alt',\n\t\t\t\tonclick: function() {\n\t\t\t\t\t/**\n\t\t\t\t\t * opens jquery dialog\n\t\t\t\t\t */\n\t\t\t\t\topenEditor(editor.selection.getNode());\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t}\n\n})( jQuery );"],"sourceRoot":""}